## 暴露给Java服务器的接口

###/CreateTask

采用Post方法

**传入参数**

```json
{
    "task_name": "task_name",
    // 训练相关参数
    "model-name": "nn", // nn or logistic
    "train-config": {
        "max_iter": 1234, // 总共要train多少个batch
        "batch_size": 32, 
        "test_per_rounds": 100, // 训练多少个batch在测试集上进行一次测试
    },
    // 各个参与节点的地址以及数据文件
    "clients": {
        "main": {
            "addr": "xxx.xxx.xxx.xxx",
            "http_port": 8380,
            "computation_port": 8381
        },
        "crypto_producer": {
            "addr": "xxx.xxx.xxx.xxx",
            "http_port": 8380,
            "computation_port": 8381
        },
        "data_clients": [
            {
                "addr": "xxx.xxx.xxx.xxx",
                "http_port": 8080,
                "computation_port": 8081,
                "data-file": "data_file.csv",
                "dim": 32,
                "data-condition": [{
                    "attr1": {
                        "min": min,
                        "max": max
                    }
                }]
            },
            {
                "addr": "xxx.xxx.xxx.xxx:port",
                "http_port": 8080,
                "computation_port": 8081,
                "data-file": "data_file.csv",
                "dim": 32,
                "data-condition": []
            }
        ],
        "label_client": {
            "addr": "xxx.xxx.xxx.xxx",
            "http_port": 8880,
            "computation_port": 8881,
            "label-file": "label-file.csv",
            "loss": "mse",
            "metrics": "auc_ks"
        }
    }
}
```

返回值：

```json
{
    "status": "ok", // ok 表示任务创建成功，err 表示任务创建失败
    "msg": "xxx"  // 表示失败的相关信息
}
```

### /TaskStatus

传入参数，采用Get方法

```javascript
/TaskStatus?task_name=task0
```

返回值

```json
{
	“status": "xxx" // Created, Preprocessing, WaitingToStart, Training, Finished, Error, NotExist
}
```

### /TrainingStatus

传入参数，采用Get方法

```javascript
/TrainingStatus?task_name=task0
```

返回值

```json
{
    "status": "ok",
    "n_rounds": 100, //表示当前训练到第几个batch
    "recent_loss": [0.11, 0.10, 0.10], // 最近在测试集上的loss
    "recent_metrics": [
        {
            "auc": 0.6,
            "ks": 0.2
        },
        {
            "auc": 0.62,
            "ks": 0.22
        },
        {
            "auc": 0.65,
            "ks": 0.23
        }
    ]
}
```

